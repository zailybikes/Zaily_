!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";var o=window.SearchSpring.Catalog;function r(e){var t=(e=e[0]||e).getBoundingClientRect(),n=t.left+t.width/2,o=t.top+t.height/2;return"INPUT"==e.tagName&&(n=0,o=0),{x:n,y:o}}function i(e){return{left:Math.round(e.left),right:Math.round(e.right),top:Math.round(e.top),bottom:Math.round(e.bottom)}}o.app.directive("ssNav",(function(){return{scope:!0,compile:function(){return{pre:function(e,t,n){var o=e.nav={elem:t,moving:"true"==n.ssNav,noFocus:function(){for(var e=o.children(),t=0;t<e.length;t++)e[t].removeClass("ss-focused")},focusElem:function(e){o.noFocus(),e.addClass("ss-focused"),"INPUT"==e[0].tagName?o.moving=!1:e.triggerHandler("focus"),o.focusedElem=e},move:function(e){var t=function(e,t,n){var o,a,u,c,f,s,l,v=[],d=r(e);for(o=0;o<t.length;o++)if(e[0]!==t[o][0]){var m=r(t[o]),p={x:d.x-m.x,y:d.y-m.y};if(!(p.x*n.x>0||p.y*n.y>0)){var g={x:Math.abs(p.x),y:Math.abs(p.y)},h=Math.abs(n.x)<Math.abs(n.y),b=i(e[0].getBoundingClientRect()),y=i(t[o][0].getBoundingClientRect());if(!(h&&(b.top<y.bottom&&b.top>=y.top||b.bottom>y.top&&b.bottom<=y.bottom)||!h&&(b.left<y.right&&b.left>=y.left||b.right>y.left&&b.right<=y.right))){var x=(a=e,u=t[o],c=void 0,f=void 0,c=r(a),f=r(u),Math.sqrt(Math.pow(Math.abs(c.x-f.x),2)+Math.pow(Math.abs(c.y-f.y),2)));v.push({elem:t[o],dist:x,sway:h&&g.x/x||!h&&g.y/x})}}}for(o=0;o<v.length;o++){var w=v[o].dist*v[o].sway+v[o].dist;(s>w||void 0===s)&&(l=v[o].elem,s=w)}return l}(o.focusedElem,o.children(),e);t&&o.focusElem(t)},children:function(){for(var e=t[0].querySelectorAll("[ss-nav-selectable], [ss-nav-input]"),n=[],o=0;o<e.length;o++){var r=e[o];!!(r.offsetWidth||r.offsetHeight||r.getClientRects().length)&&n.push(angular.element(r))}return n}}}}}}})),o.app.directive("ssNavSelectable",(function(){return{link:function(e,t){var n;t.on("mousemove",(function(){t!==e.nav.focusedElem&&(window.clearTimeout(n),n=window.setTimeout((function(){e.nav.focusElem(t)}),150))})),t.on("mouseleave",(function(){window.clearTimeout(n)}))}}})),o.app.directive("ssNavInput",(function(){return{priority:1e3,scope:!0,link:function(e,t){t.bind("focus",(function(){e.nav.focusedElem||e.nav.focusElem(t)})),t.bind("click",(function(){e.nav.focusElem(t)})),t.bind("keydown",(function(n){var o={x:0,y:0};switch(n.keyCode){case 40:e.nav.moving=!0,o.y=1;break;case 37:o.x=-1;break;case 39:o.x=1;break;case 38:e.nav.moving=!0,o.y=-1;break;case 13:e.nav.moving&&window.setTimeout((function(){e.nav.focusedElem[0].click()}));break;case 27:break;default:e.nav.moving=!1,e.nav.focusElem(t)}if(e.nav.moving)return 0==o.x&&0==o.y||e.nav.move(o),n.preventDefault(),!1}))}}})),o.importer.resolve("spatial-navigation")}]);